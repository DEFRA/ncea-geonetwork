
name: $(Date:yyyyMMdd)$(Rev:.r)

trigger:
  branches:
    include:
      - main
      - feature/*

stages:
- stage: 'Build'
  displayName: 'Build GeoNetwork App'
  jobs: 
  - job: 'Build'
    displayName: 'Build job'
    pool:
      name: DEFRA-COMMON-ubuntu2204-SSV3
    variables:
      - template: templates/variables-build.yml      
    steps:
      - template: steps-build-and-test.yaml
      - template: steps-build-and-push-docker-images.yaml
      - template: steps-package-and-push-helm-charts.yaml
